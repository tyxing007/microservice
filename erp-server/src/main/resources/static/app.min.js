"use strict";var app=angular.module("ERP",["ngMaterial","ui.router","ngFileUpload","ngMdIcons",angularDragula(angular),"angularMoment"]).config(["$httpProvider","$mdThemingProvider","$mdDateLocaleProvider",function(e,t,n){t.theme("docs-dark","default").dark(),t.theme("dark-blue").backgroundPalette("light-blue").dark(),n.formatDate=function(e){return e?moment(e).format("DD-MM-YYYY"):""},n.parseDate=function(e){var t=moment(e,"YYYY-MM-DD",!0);return t.isValid()?t.toDate():new Date(NaN)}}]).constant("formats",{date:"YYYY-MM-DD"});app.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{"abstract":!0,url:"",controller:"HeaderController",templateUrl:"template/header.html"}).state("app.main",{url:"/",controller:"AuthorizationController",templateUrl:"template/main.html"}).state("app.user",{"abstract":!0,url:"^/user",template:"<ui-view/>"}).state("app.staff",{"abstract":!0,url:"^/staff",template:"<ui-view/>"}).state("app.staff.navBar",{url:"",controller:"NavBarStaffController",templateUrl:"template/nav.bar.staff.html"}).state("app.staff.navBar.people",{url:"/people",controller:"PeopleStaffController",templateUrl:"template/people.staff.html",data:{selectedTab:"people"}}).state("app.staff.navBar.departments",{url:"/departments",controller:"DepartmentsStaffController",templateUrl:"template/departments.staff.html",data:{selectedTab:"departments"}}).state("app.staff.navBar.vacancy",{url:"/vacancy",controller:"VacancyStaffController",templateUrl:"template/vacancy.staff.html",data:{selectedTab:"vacancy"}}).state("app.user.create",{url:"/create/{userId}",controller:"UserEditController",templateUrl:"template/user.create.html"}).state("app.user.show",{url:"/show/{userID:[0-9]}",controller:"UserShowController",templateUrl:"template/user.show.html"}).state("app.departments",{url:"^/departments",controller:"DepartmentController",templateUrl:"template/department.list.html"}).state("app.projects",{url:"/projects",controller:"ProjectsController",templateUrl:"template/projects.html"}).state("app.projects.task",{url:"/task",controller:"ProjectsTaskController",templateUrl:"template/projects.task.html"}).state("app.projects.task.sprint",{url:"/sprint",controller:"ProjectsTaskSprintController",templateUrl:"template/projects.task.sprint.html"}).state("app.projects.task.backlog",{url:"/backlog",controller:"ProjectsTaskBacklogController",templateUrl:"template/projects.task.backlog.html"}).state("app.projects.info",{url:"/info",controller:"ProjectsInfoController",templateUrl:"template/projects.info.html"}).state("app.user.superAdmin",{url:"/superAdmin",controller:"superAdminController",templateUrl:"template/super.admin.html"}),e.state("error",{"abstract":!0,url:"/error",template:"<ui-view/>"}).state("error.404",{url:"^/404",templateUrl:"template/404.html"}),e.state("email-token",{url:"/user/{userId:[0-9]}/check/{token}",controller:["$scope","$stateParams","$http","$state",function(e,t,n,a){n.get("/api/user/"+t.userId+"/check/"+t.token).then(function(e){e?a.go("app.user.create",{userId:t.userId}):a.go("error.404")})}],template:"<div>Hello</div>"}),t.otherwise("/404")}]),app.controller("AuthorizationController",["$scope","serverService",function(e,t){}]),app.controller("CreateProjectController",["$scope","serverService","projectService","$mdDialog","moment","formats","$rootScope",function(e,t,n,a,r,o,c){e.project={startDate:r().format(o.date)},e.upload=function(){angular.element(document.querySelector("#fileInput")).click()},e.hide=function(){a.hide()},e.cancel=function(){a.cancel()},e.answer=function(t){return a.hide(t),e.project.dueDate=r(e.dueDate).format(o.date),n.saveProject(e.project).then(function(e){return c.$broadcast("append-project",e),e})}}]),app.controller("CreateTaskController",["$scope","serverService","taskService","$mdDialog","moment","formats",function(e,t,n,a,r,o){function c(e){return angular.isObject(e)?e:{name:e}}function l(e){var t=e?p.vegetables.filter(i(e)):[];return t}function i(e){var t=angular.lowercase(e);return function(e){return 0===e._lowername.indexOf(t)||0===e._lowertype.indexOf(t)}}function s(){var e=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"},{name:"Carrot",type:"Umbelliferous"},{name:"Lettuce",type:"Composite"},{name:"Spinach",type:"Goosefoot"}];return e.map(function(e){return e._lowername=e.name.toLowerCase(),e._lowertype=e.type.toLowerCase(),e})}n.getPriorities().then(function(t){e.priorities=t}),e.labels=[],e.task={labels:e.labels},e.taskTypes="Story Task Bug".split(" ").map(function(e){return e});var p=this;p.readonly=!1,p.selectedItem=null,p.searchText=null,p.querySearch=l,p.vegetables=s(),p.selectedVegetables=[],p.numberChips=[],p.numberChips2=[],p.numberBuffer="",p.autocompleteDemoRequireMatch=!1,p.transformChip=c,p.notFound=function(e){console.log("key",e),c(e)},e.upload=function(){angular.element(document.querySelector("#fileInput")).click()},e.requestPriotitets="Low Normal Hot".split(" ").map(function(e){return{requests:e}}),e.hide=function(){a.hide()},e.cancel=function(){a.cancel()},e.answer=function(t){e.task.labels=e.task.labels.map(function(e){return console.log("label",e),{label:e.name}}),e.task.project=n.getProject(),e.task.title="title",e.task.priority=JSON.parse(e.task.priority),n.saveTask(e.task),a.hide(t)}}]),app.controller("EditTaskController",["$scope","serverService","$mdDialog",function(e,t,n){function a(e){return angular.isObject(e)?e:{name:e,type:"new"}}function r(e){var t=e?l.vegetables.filter(o(e)):[];return t}function o(e){var t=angular.lowercase(e);return function(e){return 0===e._lowername.indexOf(t)||0===e._lowertype.indexOf(t)}}function c(){var e=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"},{name:"Carrot",type:"Umbelliferous"},{name:"Lettuce",type:"Composite"},{name:"Spinach",type:"Goosefoot"}];return e.map(function(e){return e._lowername=e.name.toLowerCase(),e._lowertype=e.type.toLowerCase(),e})}var l=this;l.readonly=!1,l.selectedItem=null,l.searchText=null,l.querySearch=r,l.vegetables=c(),l.selectedVegetables=[],l.numberChips=[],l.numberChips2=[],l.numberBuffer="",l.autocompleteDemoRequireMatch=!1,l.transformChip=a,l.notFound=function(e){console.log("key",e),a(e)},e.upload=function(){angular.element(document.querySelector("#fileInput")).click()},e.requestPriotitets="Low Normal Hot".split(" ").map(function(e){return{requests:e}}),e.requestTypes="Story Task Bug".split(" ").map(function(e){return{requests:e}}),e.hide=function(){n.hide()},e.cancel=function(){n.cancel()},e.answer=function(e){n.hide(e)}}]),app.controller("MoreDetailController",["$scope","serverService","$mdDialog",function(e,t,n){function a(e){return angular.isObject(e)?e:{name:e,type:"new"}}function r(e){var t=e?l.vegetables.filter(o(e)):[];return t}function o(e){var t=angular.lowercase(e);return function(e){return 0===e._lowername.indexOf(t)||0===e._lowertype.indexOf(t)}}function c(){var e=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"},{name:"Carrot",type:"Umbelliferous"},{name:"Lettuce",type:"Composite"},{name:"Spinach",type:"Goosefoot"}];return e.map(function(e){return e._lowername=e.name.toLowerCase(),e._lowertype=e.type.toLowerCase(),e})}e.task={createDate:"07/04 at 4:45 PM"};var l=this;l.readonly=!1,l.selectedItem=null,l.searchText=null,l.querySearch=r,l.vegetables=c(),l.selectedVegetables=[],l.numberChips=[],l.numberChips2=[],l.numberBuffer="",l.autocompleteDemoRequireMatch=!1,l.transformChip=a,l.notFound=function(e){console.log("key",e),a(e)},e.upload=function(){angular.element(document.querySelector("#fileInput")).click()},e.requestPriotitets="Low Normal Hot".split(" ").map(function(e){return{requests:e}}),e.requestTypes="Story Task Bug".split(" ").map(function(e){return{requests:e}}),e.hide=function(){n.hide()},e.cancel=function(){n.cancel()},e.answer=function(e){n.hide(e)}}]),app.controller("ProjectsInfoController",["$scope","serverService",function(e,t){function n(e){return angular.isObject(e)?e:{name:e,type:"new"}}function a(e){var t=e?c.vegetables.filter(r(e)):[];return t}function r(e){var t=angular.lowercase(e);return function(e){return 0===e._lowername.indexOf(t)||0===e._lowertype.indexOf(t)}}function o(){var e=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"},{name:"Carrot",type:"Umbelliferous"},{name:"Lettuce",type:"Composite"},{name:"Spinach",type:"Goosefoot"}];return e.map(function(e){return e._lowername=e.name.toLowerCase(),e._lowertype=e.type.toLowerCase(),e})}e.lock_description=!0,e.icon_description="edit",e.controlDescription=function(t){e.lock_description?(e.lock_description=!1,e.icon_description="done"):(e.lock_description=!0,e.icon_description="edit")},e.lock_technology=!0,e.icon_technology="edit",e.controlTechnology=function(t){e.lock_technology?(e.lock_technology=!1,e.icon_technology="done"):(e.lock_technology=!0,e.icon_technology="edit")},e.project={description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it to make a type specimen book.It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."};var c=this;c.readonly=!1,c.selectedItem=null,c.searchText=null,c.querySearch=a,c.vegetables=o(),c.selectedVegetables=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"}],c.numberChips=[],c.numberChips2=[],c.numberBuffer="",c.autocompleteDemoRequireMatch=!1,c.transformChip=n,c.notFound=function(e){console.log("key",e),n(e)}}]),app.controller("ProjectsController",["$scope","serverService","projectService","taskService","$mdDialog","$mdMedia","$rootScope",function(e,t,n,a,r,o,c){var l;e.projectLabel="Select project",n.getProjects().then(function(t){e.projects=t}),c.$on("append-project",function(t,n){e.projects.push(n)}),e.selectProject=function(t,n){e.currentProject=n,e.projectLabel=n.name},e.openMenu=function(e,t){l=t,e(t)},e.names="Booking Twaddle Perry".split(" ").map(function(e){return{projects:e}}),e.showCreteProject=function(t){r.show({controller:"CreateProjectController as createProject",templateUrl:"template/modal.create.project.html",parent:angular.element(document.body),targetEvent:t,preserveScope:!0,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},e.showCreteTask=function(t){e.currentProject?(a.setCurrentProject(e.currentProject),r.show({controller:"CreateTaskController as createTask",templateUrl:"template/modal.create.task.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})):alert("Choose project!")},e.showEditTask=function(t){r.show({controller:"EditTaskController as editTask",templateUrl:"template/modal.edit.task.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},e.showMoreDetail=function(t){r.show({controller:"MoreDetailController as moreDetail",templateUrl:"template/modal.more.detail.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})}}]),app.controller("ProjectsTaskBacklogController",["$scope","serverService","dragulaService",function(e,t,n){}]),app.factory("projectService",["$q","serverService",function(e,t){return{getProjects:function(){var n=e.defer();return t.getProjects().then(function(e){n.resolve(e)}),n.promise},saveProject:function(n){var a=e.defer();return t.saveProject(n).then(function(e){a.resolve(e)}),a.promise}}}]),app.factory("taskService",["$q","serverService",function(e,t){var n;return{getPriorities:function(){var n=e.defer();return t.getPriorities().then(function(e){n.resolve(e)}),n.promise},saveTask:function(n){var a=e.defer();return t.saveTask(n).then(function(e){a.resolve(e)}),a.promise},setCurrentProject:function(e){n=e},getProject:function(){return n}}}]),app.factory("stepService",["$q","serverService",function(e,t){return{createStep:function(e){return t.createStep(e)}}}]),app.factory("userService",["$q","serverService",function(e,t){return{getUsers:function(){var n=e.defer();return t.getUsers().then(function(e){n.resolve(e)}),n.promise},getUser:function(n){var a=e.defer();return t.getUser(n).then(function(e){a.resolve(e)}),a.promise},uploadImage:function(e,n){return t.uploadImage(e,n)},deleteImage:function(e){return t.deleteImage(e)},createUser:function(e){return t.createUser(e)},sendToEmail:function(e,n){return t.sendToEmail(e,n)}}}]),app.factory("vacancyService",["$q","serverService",function(e,t){return{getVacancies:function(){var n=e.defer();return t.getVacancies().then(function(e){n.resolve(e)}),n.promise},createVacancy:function(e){return t.saveVacancy(e)}}}]),app.controller("DepartmentController",["$scope","serverService",function(e,t){t.getDepartments().then(function(t){e.departments=t})}]),app.controller("DepartmentsStaffController",["$scope","$state",function(e,t){}]),app.controller("ModalAddInterviewController",["$scope","CandidateTypeEnum","$mdDialog","autocompleteService","data","formats","stepService",function(e,t,n,a,r,o,c){e.getAutocompleteData=a.getAutocompleteDataFromServer,_.filter(r.vacancy.candidates,function(t){t.id==r.candidateId&&_.filter(t.stepToCandidate,function(n){n.id==r.stepId&&(e.stepInfo=n,e.candidateName=t.name+" "+t.lastName)})}),e.addKit=function(e){return e},e.saveInterview=function(){e.stepInfo.date=moment(e.dateForStep).format(o.date);var t=c.createStep(e.stepInfo);return n.cancel(),t},e.cancel=function(){n.cancel()}}]),app.controller("ModalAddParticipantController",["$scope","CandidateTypeEnum","$mdDialog","autocompleteService","$rootScope","formats","data","vacancyService","userService",function(e,t,n,a,r,o,c,l,i){e.getAutocompleteData=a.getAutocompleteDataFromServer,e.candidateType=t,e.vacancy=c.vacancy,e.selectCandidate=null,e.stepDate=[];var s=0;_.filter(c.vacancy.nameStep,function(t){e.stepDate[s]={name:t,stepToCandidate:{id:null,date:null,interviewer:[],vacancy:{id:c.vacancy.id,name:c.vacancy.name},marks:[],time:null,gpaMark:0,file:null}},s++}),e.date=null,e.newCandidate={id:null,email:"",name:"",lastName:"",type:"CANDIDATE",statusToCandidate:t.PENDING,stepToCandidate:[],totalScore:0},e.saveVacancy=function(){var t=!1;if(_.filter(e.vacancy.candidates,function(n){null!=e.selectCandidate&&n.id==e.selectCandidate.id&&(t=!0)}),null==e.selectCandidate){for(var a=0;a<e.vacancy.nameStep.length;a++)for(var o=0;o<e.stepDate.length;o++)e.vacancy.nameStep[a]==e.stepDate[o].name&&(e.newCandidate.stepToCandidate[a]=e.stepDate[o].stepToCandidate);i.createUser(e.newCandidate).then(function(t){e.newCandidate.id=t.data.id,e.vacancy.candidates[e.vacancy.candidates.length]=e.newCandidate,l.createVacancy(e.vacancy).then(function(e){r.$broadcast("EditVacancyStaff",e.data)})})}else if(!t){for(var a=0;a<e.vacancy.nameStep.length;a++)for(var o=0;o<e.stepDate.length;o++)e.vacancy.nameStep[a]==e.stepDate[o].name&&(e.selectCandidate.stepToCandidate[e.selectCandidate.stepToCandidate.length]=e.stepDate[o].stepToCandidate);e.vacancy.candidates[e.vacancy.candidates.length]=e.selectCandidate,l.createVacancy(e.vacancy).then(function(e){r.$broadcast("EditVacancyStaff",e.data)})}n.cancel()},e.cancel=function(){n.cancel()}}]),app.controller("ModalCreateVacancyController",["$scope","vacancyService","VacancyTypeEnum","$mdDialog","autocompleteService","$rootScope",function(e,t,n,a,r,o){e.getAutocompleteData=r.getAutocompleteDataFromServer,e.typeVacancy=n,e.newVacancy={id:null,name:"",date:"",nameStep:["Interview"],responsible:{},candidates:[],dutiesAndResponsible:"",requiredSkills:"",willByAPlus:"",offer:"",type:new Array,hotVacancy:!1},e.addChip=function(t){for(var n=1,a=0;a<e.newVacancy.nameStep.length;a++)e.newVacancy.nameStep[a]==t&&(n+=1),e.newVacancy.nameStep[a]==t+" "+n&&(n+=1);1==n?e.newVacancy.nameStep[e.newVacancy.nameStep.length]=t:e.newVacancy.nameStep[e.newVacancy.nameStep.length]=t+" "+n},e.saveVacancy=function(){var n=t.createVacancy(e.newVacancy).then(function(e){return o.$broadcast("CreateVacancyStaff",e.data),e});return a.hide(),a.cancel(),n},e.cancel=function(){a.cancel()}}]),app.controller("ModalEditVacancyController",["$rootScope","$scope","vacancyService","VacancyTypeEnum","$mdDialog","autocompleteService","data",function(e,t,n,a,r,o,c){t.getAutocompleteData=o.getAutocompleteDataFromServer,t.typeVacancy=a,t.newVacancy=c.vacancy,t.addChip=function(e){for(var n=1,a=0;a<t.newVacancy.nameStep.length;a++)t.newVacancy.nameStep[a]==e&&(n+=1),t.newVacancy.nameStep[a]==e+" "+n&&(n+=1);1==n?t.newVacancy.nameStep[t.newVacancy.nameStep.length]=e:t.newVacancy.nameStep[t.newVacancy.nameStep.length]=e+" "+n},t.saveVacancy=function(){var a=n.createVacancy(t.newVacancy).then(function(t){return e.$broadcast("EditVacancyStaff",t.data),t});return r.cancel(),a},t.cancel=function(){r.cancel()}}]),app.controller("ModalStepController",["$scope","data","$mdDialog",function(e,t,n){e.cancel=function(){n.cancel()},_.filter(t.vacancy.candidates,function(n){n.id==t.candidateId&&_.filter(n.stepToCandidate,function(a){a.id==t.stepId&&(e.stepInfo=a,e.stepInfo.candidate=n.name,e.stepInfo.totalScore=n.totalScore,null!=e.stepInfo.responsible?e.stepInfo.responsibleName=e.stepInfo.responsible.name+" "+e.stepInfo.responsible.lastName:null!=t.vacancy.responsible&&(e.stepInfo.responsibleName=t.vacancy.responsible.name+" "+t.vacancy.responsible.lastName))})})}]),app.controller("NavBarStaffController",["$scope","$state",function(e,t){e.currentNavItem=t.current.data.selectedTab}]),app.controller("PeopleStaffController",["$scope","userService","UserTypeEnum",function(e,t,n){t.getUsers().then(function(t){e.users=t,e.EMPLOYEE=0,e.RELEASED=0,e.CANDIDATE=0,e.CUSTOMER=0,angular.forEach(e.users,function(t){t.type==n.EMPLOYEE&&(e.EMPLOYEE+=1),t.type==n.RELEASED&&(e.RELEASED+=1),t.type==n.CANDIDATE&&(e.CANDIDATE+=1),t.type==n.CUSTOMER&&(e.CUSTOMER+=1)})}),e.filterByType=function(t){return!e.typeUser||t.type.toLowerCase().indexOf(e.typeUser.toLowerCase())!=-1},e.search=function(t){return!e.searchText||null!=t.name&&t.name.toLowerCase().indexOf(e.searchText.toLowerCase())!=-1||null!=t.position&&t.position.toLowerCase().indexOf(e.searchText.toLowerCase())!=-1||null!=t.email&&t.email.toLowerCase().indexOf(e.searchText.toLowerCase())!=-1||null!=t.phone&&t.phone.toLowerCase().indexOf(e.searchText.toLowerCase())!=-1}}]),app.controller("ProjectsInfoController",["$scope","serverService",function(e,t){function n(e){return angular.isObject(e)?e:{name:e,type:"new"}}function a(e){var t=e?c.vegetables.filter(r(e)):[];return t}function r(e){var t=angular.lowercase(e);return function(e){return 0===e._lowername.indexOf(t)||0===e._lowertype.indexOf(t)}}function o(){var e=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"},{name:"Carrot",type:"Umbelliferous"},{name:"Lettuce",type:"Composite"},{name:"Spinach",type:"Goosefoot"}];return e.map(function(e){return e._lowername=e.name.toLowerCase(),e._lowertype=e.type.toLowerCase(),e})}e.lock_description=!0,e.icon_description="edit",e.controlDescription=function(t){e.lock_description?(e.lock_description=!1,e.icon_description="done"):(e.lock_description=!0,e.icon_description="edit")},e.lock_technology=!0,e.icon_technology="edit",e.controlTechnology=function(t){e.lock_technology?(e.lock_technology=!1,e.icon_technology="done"):(e.lock_technology=!0,e.icon_technology="edit")},e.project={description:"Lorem Ipsum is simply dummy text of the printing and typesetting industry.Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,when an unknown printer took a galley of type and scrambled it to make a type specimen book.It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."};var c=this;c.readonly=!1,c.selectedItem=null,c.searchText=null,c.querySearch=a,c.vegetables=o(),c.selectedVegetables=[{name:"Broccoli",type:"Brassica"},{name:"Cabbage",type:"Brassica"}],c.numberChips=[],c.numberChips2=[],c.numberBuffer="",c.autocompleteDemoRequireMatch=!1,c.transformChip=n,c.notFound=function(e){console.log("key",e),n(e)}}]),app.controller("ProjectsController",["$scope","serverService","projectService","taskService","$mdDialog","$mdMedia","$rootScope",function(e,t,n,a,r,o,c){var l;e.projectLabel="Select project",n.getProjects().then(function(t){e.projects=t}),c.$on("append-project",function(t,n){e.projects.push(n)}),e.selectProject=function(t,n){e.currentProject=n,e.projectLabel=n.name},e.openMenu=function(e,t){l=t,e(t)},e.names="Booking Twaddle Perry".split(" ").map(function(e){return{projects:e}}),e.showCreteProject=function(t){r.show({controller:"CreateProjectController as createProject",templateUrl:"template/modal.create.project.html",parent:angular.element(document.body),targetEvent:t,preserveScope:!0,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},e.showCreteTask=function(t){e.currentProject?(a.setCurrentProject(e.currentProject),r.show({controller:"CreateTaskController as createTask",templateUrl:"template/modal.create.task.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})):alert("Choose project!")},e.showEditTask=function(t){r.show({controller:"EditTaskController as editTask",templateUrl:"template/modal.edit.task.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},e.showMoreDetail=function(t){r.show({controller:"MoreDetailController as moreDetail",templateUrl:"template/modal.more.detail.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})}}]),app.controller("ProjectsTaskController",["$scope","serverService","dragulaService","$rootScope",function(e,t,n,a){n.options(e,"first-bag",{removeOnSpill:!0}),e.currentNavItem="Tasks",e.project={filter:"All filters"},e.names="Booking Twaddle Perry".split(" ").map(function(e){return{projects:e}}),e.boards="Kanban dashboards1 dashboards2".split(" ").map(function(e){return{projects:e}}),e.filters="All filters, Only My Issues, Recently Update".split(", ").map(function(e){return{projects:e}});var r="https://material.angularjs.org/latest/img/list/60.jpeg";e.messages=[{face:r,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands1"},{face:r,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands2"},{face:r,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands3"},{face:r,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands4"},{face:r,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands5"}],e.taskSettings=[{icon:"home",name:"Backlog"},{icon:"home",name:"Active sprints"},{icon:"home",name:"Releases"},{icon:"home",name:"Statistics"},{icon:"home",name:"Requests"},{icon:"home",name:"Components"},{icon:"home",name:"Settings",clazz:"project-settings"}],e.stories=[{name:"DEN-2 Как суперадмін хочу просматривать все розговори менеджеров",rows:[{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM1",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM2",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM3",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM4",face:r}]},{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM1",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM2",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM3",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM4",face:r}]}]},{name:"DEN-5 Как суперадмін хочу просматривать все розговори менеджеров",rows:[{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM!!!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r}]},{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM!!!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r}]},{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM!!!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r}]}]},{name:"DEN-10 Как суперадмін хочу просматривать все розговори менеджеров",rows:[{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM!!!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r}]}]},{name:"DEN-20 Как суперадмін хочу просматривать все розговори менеджеров",rows:[{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM!!!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r}]},{columns:[{title:"Вивчення можливостей по інтеграції Skype до CRM!!!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r},{title:"Вивчення можливостей по інтеграції Skype до CRM!",face:r}]}]}],e.columns=[{name:"To implement (9)"},{name:"In progress (15)"},{name:"Ready to test (2)"},{name:"Done (14)"}],e.flexColumn=100/e.columns.length,a.$on("second-bag.drag",function(e,t){t.removeClass("ex-moved")}),a.$on("second-bag.drop",function(e,t){t.addClass("ex-moved")}),a.$on("second-bag.over",function(e,t,n){n.addClass("ex-over")}),a.$on("second-bag.out",function(e,t,n){n.removeClass("ex-over")})}]),app.controller("superAdminController",["$scope","userService","UserTypeEnum",function(e,t,n){e.typeUser=n,e.sendToEmail=function(n,a){return t.sendToEmail(n,a).then(function(t){return e.successfullySend="Message sent successfully to "+t.data.email,t.data})}}]),app.controller("UserController",["$scope","userService",function(e,t){t.getUsers().then(function(t){e.users=t})}]),app.controller("UserEditController",["$scope","userService","autocompleteService","$stateParams","$state",function(e,t,n,a,r){e.getAutocompleteData=n.getAutocompleteDataFromServer,e.addKit=function(t){var n=!1;return angular.forEach(e.user.skills,function(e){e.name==t&&(n=!0)}),n?null:{name:t}},t.getUser(a.userId).then(function(t){e.user=t}),e.deleteImage=function(){return e.file=null,t.deleteImage(e.user.id)},e.saveUser=function(n){return t.createUser(e.user).then(function(){var a=t.uploadImage(n,e.user.id);return r.go("app.main"),a})}}]),app.controller("UserShowController",["$scope","$stateParams","userService",function(e,t,n){n.getUser(t.userID).then(function(t){e.user=t})}]),app.controller("VacancyStaffController",["$scope","vacancyService","VacancyTypeEnum","$mdDialog","$rootScope",function(e,t,n,a,r){r.$on("CreateVacancyStaff",function(t,n){e.vacancies.push(n)}),r.$on("EditVacancyStaff",function(t,n){_.filter(e.vacancies,function(t,a){if(t.id==n.id)return void(e.vacancies[a]=n)})}),t.getVacancies().then(function(t){e.vacancies=t,e.OPENED=0,e.INACTIVE=0,e.CLOSED=0,angular.forEach(e.vacancies,function(t){t.type==n.OPENED&&(e.OPENED+=1),t.type==n.INACTIVE&&(e.INACTIVE+=1),t.type==n.CLOSED&&(e.CLOSED+=1)}),e.date=new Date}),e.filterByType=function(t){return!e.typeVacancy||t.type.toLowerCase().indexOf(e.typeVacancy.toLowerCase())!=-1},e.search=function(t){return!e.searchText||t.name.toLowerCase().indexOf(e.searchText.toLowerCase())!=-1},e.open=function(t,n){t&&_.filter(e.vacancies,function(t){t.id==n&&(t=e.GPAMark(t))})},e.GPAMark=function(e){_.forEach(e.candidates,function(t){var n=[];if(_.forEach(t.stepToCandidate,function(t,a){t.interviewer.length==t.marks.length&&0!=t.marks.length&&t.vacancy.id==e.id?t.gpaMark=_.meanBy(t.marks,"mark"):t.gpaMark=0,t.vacancy.id!=e.id&&(n[n.length]=a)}),n.length>0)for(var a=n.length;a--;)t.stepToCandidate.splice(n[a],1);t.totalScore=_.meanBy(t.stepToCandidate,"gpaMark"),_.forEach(t.stepToCandidate,function(n){0==n.gpaMark&&n.vacancy.id==e.id&&(t.totalScore=0)})})},e.openStepInfo=function(e,t,n,r,o,c){"0000-01-01"!=o?a.show({controller:"ModalStepController",templateUrl:"template/modal.show.step.html",parent:angular.element(document.body),targetEvent:r,locals:{data:{vacancy:c,vacancyId:e,candidateId:t,stepId:n}},hasBackdrop:!0,clickOutsideToClose:!0}):a.show({controller:"ModalAddInterviewController",templateUrl:"template/modal.add.interview.html",parent:angular.element(document.body),targetEvent:r,hasBackdrop:!0,clickOutsideToClose:!1,locals:{data:{vacancy:c,vacancyId:e,candidateId:t,stepId:n}}})},e.openCreateVacancy=function(e){a.show({controller:"ModalCreateVacancyController",templateUrl:"template/modal.create.vacancy.html",parent:angular.element(document.body),targetEvent:e,hasBackdrop:!0,clickOutsideToClose:!1})},e.openEditVacancy=function(e,t){a.show({controller:"ModalEditVacancyController",templateUrl:"template/modal.edit.vacancy.html",parent:angular.element(document.body),targetEvent:e,hasBackdrop:!0,clickOutsideToClose:!1,locals:{data:{vacancy:t}}})},e.openAddParticipant=function(e,t){a.show({controller:"ModalAddParticipantController",templateUrl:"template/modal.add.participant.html",parent:angular.element(document.body),targetEvent:e,hasBackdrop:!0,clickOutsideToClose:!1,locals:{data:{vacancy:t}}})}}]),app.controller("HeaderController",["$scope","$timeout","$mdSidenav","$log",function(e,t,n,a){function r(n,a,r){var o;return function(){var r=e,c=Array.prototype.slice.call(arguments);t.cancel(o),o=t(function(){o=void 0,n.apply(r,c)},a||10)}}function o(e){return r(function(){n(e).toggle().then(function(){a.debug("toggle "+e+" is done")})},200)}function c(e){return function(){n(e).toggle().then(function(){a.debug("toggle "+e+" is done")})}}e.toggleLeft=o("left"),e.toggleRight=c("right"),e.isOpenRight=function(){return n("right").isOpen()}}]),app.controller("EventController",["$scope","$timeout","$mdSidenav","$log",function(e,t,n,a){e.close=function(){n("right").close().then(function(){a.debug("close RIGHT is done")})}}]),app.factory("autocompleteService",["$rootScope","serverService",function(e,t){return{getAutocompleteDataFromServer:function(n){t.getAutocompleteDataFromServer(n).success(function(t){e.autocomplete[n]=t})}}}]),app.factory("serverService",["$http","$q","Upload","$rootScope",function(e,t,n,a){String.prototype.format=String.prototype.formatf=function(){var e=arguments;return this.replace(/\{(\d+)\}/g,function(t,n){return e[n]?e[n]:t})};var r={usersGET:"/api/erp/users",
userGET:"/api/erp/user/{0}",userCreatePOST:"/api/erp/user/create",sentTokenToEmailPOST:"/erp/api/token/send",checkUserByToken:"/api/erp/user/{0}/check/{1}",bindUserWithDepartmentGET:"/api/erp/user/{0}/bind/{1}",sentToEmailTokenPOST:"/api/erp/token/send",departmentsGET:"/api/departments",departmentGET:"/api/department/{0}",departmentCreatePOST:"/api/department/create",bindDepartmentWithUser:"/api/department/{0}/bind/{1}",uploadImagePOST:"/api/image/upload/user/",deleteImageDELETE:"/api/image/delete/user/",vacanciesGET:"/api/vacancies",createVacancyPOST:"/api/vacancy/create",stepPOST:"/api/step",tasksGET:"/api/task",taskPOST:"/api/task",taskPUT:"/api/task",taskByIdGET:"/api/task/{0}",taskDELETE:"/api/task/{0}",statusesGET:"/api/task/status",statusPOST:"/api/task/status/{0}",labelsGET:"/api/task/label",labelPOST:"/api/task/label/{0}",prioritiesGET:"/api/task/priority",priorityPOST:"/api/task/priority/{0}",projectsGET:"/api/project",projectPOST:"/api/project",projectByIdGET:"/api/project/{0}",skillsGET:"/api/skills",autocompleteDataFromServerGET:"/api/autocomplete/"};return a.autocomplete={departmentNames:[]},{getUsers:function(){var n=t.defer();return e.get(r.usersGET).then(function(e){n.resolve(e.data)}),n.promise},getUser:function(n){var a=t.defer();return e.get(r.userGET.formatf(n)).then(function(e){a.resolve(e.data)}),a.promise},uploadImage:function(e,t){if(null!=e)return n.upload({url:r.uploadImagePOST+t,data:{file:e}})},deleteImage:function(t){return e["delete"](r.deleteImageDELETE+t)},createUser:function(t){return e.post(r.userCreatePOST,t)},sendToEmail:function(t,n){return e.post(r.sentToEmailTokenPOST,{email:t,type:n})},getAutocompleteDataFromServer:function(t){return e.get(r.autocompleteDataFromServerGET+t)},getVacancies:function(){var n=t.defer();return e.get(r.vacanciesGET).then(function(e){n.resolve(e.data)}),n.promise},getProjects:function(){var n=t.defer();return e.get(r.projectsGET).then(function(e){n.resolve(e.data)}),n.promise},saveProject:function(n){var a=t.defer();return e.post(r.projectPOST,n).then(function(e){a.resolve(e.data)}),a.promise},getProjectById:function(n){var a=t.defer();return e.get(r.projectByIdGET.formatf(n)).then(function(e){a.resolve(e.data)}),a.promise},saveVacancy:function(t){return e.post(r.createVacancyPOST,t)},saveTask:function(n){var a=t.defer();return e.post(r.taskPOST,n).then(function(e){a.resolve(e.data)}),a.promise},getPriorities:function(){var n=t.defer();return e.get(r.prioritiesGET).then(function(e){n.resolve(e.data)}),n.promise},createStep:function(t){return e.post(r.stepPOST,t)}}}]),app.factory("CandidateTypeEnum",function(){return{TAKEN:"TAKEN",PENDING:"PENDING",REJECTED:"REJECTED"}}),app.factory("UserTypeEnum",function(){return{EMPLOYEE:"EMPLOYEE",CUSTOMER:"CUSTOMER",RELEASED:"RELEASED",CANDIDATE:"CANDIDATE"}}),app.factory("VacancyTypeEnum",function(){return{OPENED:"OPENED",INACTIVE:"INACTIVE",CLOSED:"CLOSED"}});